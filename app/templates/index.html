{% extends 'base.html' %}
{% load static %}

{% block title %}
    index
{% endblock %}

{% block extrahead %}
    {% if user.is_authenticated %}
        <script
            type="text/javascript"
            src='{% static 'coffee/index.js' %}'
        ></script>
        {% include 'projects/manage/project_line.html' %}
        {% include 'projects/project/task_line.html' %}
        {% include 'projects/project/task_line_popover.html' %}
    {% endif %}
{% endblock %}

{% block content %}
    {% if user.is_authenticated %}
        <div class='col-lg-12 row'>
            <div class='col-lg-6'>
                <h2>Enabled projects</h2>
                <table class="table table-hover col-lg-6 js-enabled-projects">
                    <tr><td>Loading...</td></tr>
                </table>
            </div>
            <div class='col-lg-6'>
                <h2>Last tasks</h2>
                <table class="table table-hover col-lg-6 js-last-tasks">
                    <tr><td>Loading...</td></tr>
                </table>
            </div>
        </div>
    {% endif %}
    <div class='col-lg-12 row'>
        <div class='col-lg-6'>
            <h2>How-to use</h2>
            <ol class='how-to'>
                <li>
                    Create <code>.covio.yml</code> with violations and project name:
                    <pre class="prettyprint languague-yaml">
violations:
  pep8: pep8 . --exclude='*migrations*'
  sloccount: sloccount .
project: 'user/project'</pre>
                    Where <code>user</code> - you github user, and <code>project</code> - project name.
                </li>
                <li>Enable project in <a href='{% url 'projects_manage' %}'>management page</a>.</li>
                <li>
                    Add dependency installation and <code>covio</code> call to <code>.travis.yml</code>:
                    <pre class="prettyprint languague-yaml">
before_install:
  - pip install pep8
  - sudo apt-get update -qq
  - sudo apt-get install -qq sloccount
after_script:
  - pip install coviolations_app
  - covio</pre>
                </li>
            </ol>
        </div>
        <div class='col-lg-6'>
            <h2>Available violations</h2>
            <ul class='how-to'>
                <li><code>pep8</code></li>
                <li><code>sloccount</code></li>
                <li><code>py_unittest</code></li>
            </ul>
        </div>
    </div>
{% endblock %}
